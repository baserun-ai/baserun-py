syntax = "proto3";

package baserun.v1;

message Status {
    string message = 1;

    enum StatusCode {
        STATUS_CODE_UNSPECIFIED = 0;
        STATUS_CODE_OK = 1;
        STATUS_CODE_ERROR = 2;
    }

    StatusCode code = 2;
}

message Message {
    string role = 1;
    string content = 2;
    string finish_reason = 3;
}

message Span {
    string run_id = 1;
    bytes trace_id = 2;
    uint64 span_id = 3;
    string name = 4;
    fixed64 start_time = 5;
    fixed64 end_time = 6;
    Status status = 7;

    // Attributes
    string vendor = 8;
    string request_type = 9;
    string api_base = 10;
    string api_type = 11;
    string model = 12;
    float temperature = 13;
    float top_p = 14;
    float frequency_penalty = 15;
    float presence_penalty = 16;
    int32 total_tokens = 17;
    int32 completion_tokens = 18;
    int32 prompt_tokens = 19;

    repeated Message prompt_messages = 20;
    repeated Message completions = 21;
}

message SubmitSpanRequest {
    Span span = 1;
}

message SubmitSpanResponse {
    string message = 1;
}

service SpanSubmissionService {
    rpc SubmitSpan (SubmitSpanRequest) returns (SubmitSpanResponse);
}